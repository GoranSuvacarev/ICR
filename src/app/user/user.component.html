<div class="wrapper" *ngIf="user">
  <h1 class="page-title">Moj Profil</h1>

  <!-- Profile Header Card -->
  <div class="profile-header">
    <div class="avatar-section">
      <img class="profile-avatar" [src]="['https://ui-avatars.com/api/?name='+user.email+'&size=150&background=2ECC71&color=fff']" [alt]="user.username">
      <div class="user-info">
        <h2 class="username">{{user.username}}</h2>
        <p class="user-email">{{user.email}}</p>
        <div class="favorite-badge">
          <i class="fa-solid fa-heart"></i>
          <span>{{user.favoriteType}}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Grid -->
  <div class="profile-grid">

    <!-- User Information Card -->
    <mat-card class="section-card" appearance="outlined">
      <mat-card-header>
        <div class="card-header-content">
          <i class="fa-regular fa-user header-icon"></i>
          <h3>Korisničke Informacije</h3>
        </div>
      </mat-card-header>
      <mat-card-content>
        <div class="form-grid">
          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput type="text" [(ngModel)]="copyUser!.email" disabled/>
            <mat-icon matPrefix>email</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Korisničko ime</mat-label>
            <input matInput type="text" [(ngModel)]="copyUser!.username" />
            <mat-icon matPrefix>person</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Telefon</mat-label>
            <input matInput type="text" [(ngModel)]="copyUser!.phone" />
            <mat-icon matPrefix>phone</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Adresa</mat-label>
            <input matInput type="text" [(ngModel)]="copyUser!.address" />
            <mat-icon matPrefix>home</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Omiljeni tip</mat-label>
            <mat-select [(ngModel)]="copyUser!.favoriteType">
              <mat-option *ngFor="let type of typeNames" [value]="type">
                {{ type }}
              </mat-option>
            </mat-select>
            <mat-icon matPrefix>favorite</mat-icon>
          </mat-form-field>
        </div>

        <button mat-raised-button class="action-button" (click)="doUpdateUser()">
          <i class="fa-solid fa-check"></i>
          Sačuvaj izmene
        </button>
      </mat-card-content>
    </mat-card>

    <!-- Change Password Card -->
    <mat-card class="section-card" appearance="outlined">
      <mat-card-header>
        <div class="card-header-content">
          <i class="fa-solid fa-key header-icon"></i>
          <h3>Promeni Lozinku</h3>
        </div>
      </mat-card-header>
      <mat-card-content>
        <div class="form-grid">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Stara lozinka</mat-label>
            <input matInput type="password" [(ngModel)]="oldPasswordValue"/>
            <mat-icon matPrefix>lock</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Nova lozinka</mat-label>
            <input matInput type="password" [(ngModel)]="newPasswordValue" />
            <mat-icon matPrefix>lock_open</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Ponovi lozinku</mat-label>
            <input matInput type="password" [(ngModel)]="repeatPasswordValue" />
            <mat-icon matPrefix>lock_reset</mat-icon>
          </mat-form-field>
        </div>

        <button mat-raised-button class="action-button" (click)="doChangePassword()">
          <i class="fa-solid fa-key"></i>
          Promeni lozinku
        </button>
      </mat-card-content>
    </mat-card>
  </div>
</div>
